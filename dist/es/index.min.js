import e from"fs";import n from"fontmin";import t from"path";function o(o){return{name:"rollup-plugin-mdi-fontmin",async buildStart(){const i="materialdesignicons",s=(o={names:[],output:"public/fonts/mdi",silent:!1,logPrefix:"[rollup-plugin-mdi-fontmin]",...o??{}}).logPrefix?` ${o.logPrefix}`:"",r=t.resolve(`node_modules/@mdi/font/fonts/${i}-webfont.ttf`),f=t.resolve(`node_modules/@mdi/font/css/${i}.min.css`),c=t.normalize(o.output.replace(/^\/+/,"")),l=t.resolve(c);try{if(function(n,t){if(!e.existsSync(n))throw new Error(`font file ${n} does not exist,\ncheck if the @mdi/font package is properly installed.`);if(!e.existsSync(t))throw new Error(`CSS file ${t} does not exists,\ncheck if the @mdi/font package is properly installed.`)}(r,f),e.existsSync(t.join(l,`${i}.min.css`))&&e.existsSync(t.join(l,`${i}-webfont.ttf`))&&e.existsSync(t.join(l,`${i}-webfont.eot`))&&e.existsSync(t.join(l,`${i}-webfont.woff`))&&e.existsSync(t.join(l,`${i}-webfont.woff2`)))return void(o.silent||console.log(`✅${s} Font files already exist, skipping generation.`));o.silent||console.log(`✅${s} Starting Subset mdi fonts generation...`),e.existsSync(l)||e.mkdirSync(l,{recursive:!0});const a=e.readFileSync(f,"utf8"),u=function(e,n=[]){let t;const o=/\.mdi-([a-z0-9-]+):{1,2}before{content:"\\([A-Fa-f0-9]+?)"/g,i=[];for(;t=o.exec(e);)n.includes(t[1])&&i.push({name:t[1],code:t[2]});return i}(a,o.names),d=function(e){return e.map((e=>String.fromCodePoint(parseInt(e.code,16)))).join()}(u);await(new n).src(r).dest(l).use(n.glyph({text:d,hinting:!0})).use(n.ttf2eot()).use(n.ttf2woff()).use(n.ttf2woff2()).runAsync();try{const n=function(e,n=[]){return e.replace(/\.mdi-([a-z0-9-]+):{1,2}before{content:"\\[A-Fa-f0-9]+?"}/g,((e,t)=>n.includes(t)?e:"")).replace(/\.\.\/fonts\//g,"./").replace(/\/\*# sourceMappingURL=.*? \*\//,"").replace(/\n+/g,"")+"\n"}(a,o.names);e.writeFileSync(t.join(l,`${i}.min.css`),n),o.silent||console.log(`✅${s} Subset mdi fonts generated at `+c)}catch(e){console.error(`❌${s} Subset mdi .css generation failed:`,e)}}catch(e){console.error(`❌${s} Subset mdi fonts generation failed:`,e)}}}}export{o as default};
//# sourceMappingURL=index.min.js.map
