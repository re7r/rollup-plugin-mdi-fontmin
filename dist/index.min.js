"use strict";module.exports=function(e){return{name:"rollup-plugin-mdi-fontmin",async buildStart(){e=Object.assign({names:[],output:"public/fonts/mdi",silent:!1,logPrefix:"[rollup-plugin-mdi-fontmin]"},e??{});const n="materialdesignicons",t=(await import("fs")).default,o=(await import("path")).default,i=(await import("fontmin")).default,s=e.logPrefix?` ${e.logPrefix}`:"",r=o.resolve(`node_modules/@mdi/font/fonts/${n}-webfont.ttf`),c=o.resolve(`node_modules/@mdi/font/css/${n}.min.css`),f=o.normalize(e.output.replace(/^\/+/,"")),l=o.resolve(f);try{if(!t.existsSync(r))throw new Error(`font file ${r} does not exist,\ncheck if the @mdi/font package is properly installed.`);if(!t.existsSync(c))throw new Error(`css file ${r} does not exist,\ncheck if the @mdi/font package is properly installed.`);if(t.existsSync(o.join(l,`${n}.min.css`))&&t.existsSync(o.join(l,`${n}-webfont.ttf`))&&t.existsSync(o.join(l,`${n}-webfont.eot`))&&t.existsSync(o.join(l,`${n}-webfont.woff`))&&t.existsSync(o.join(l,`${n}-webfont.woff2`)))return void(e.silent||console.log(`✅${s} Font files already exist, skipping generation.`));e.silent||console.log(`✅${s} Starting Subset mdi fonts generation...`),t.existsSync(l)||t.mkdirSync(l,{recursive:!0});const a=t.readFileSync(c,"utf8"),u=function(e,n=[]){let t;const o=/\.mdi-([a-z0-9-]+):{1,2}before{content:"\\([A-Fa-f0-9]+?)"/g,i=[];for(;t=o.exec(e);)n.includes(t[1])&&i.push({name:t[1],code:t[2]});return i}(a,e.names),d=function(e){return e.map((e=>String.fromCodePoint(parseInt(e.code,16)))).join()}(u);await(new i).src(r).dest(l).use(i.glyph({text:d,hinting:!0})).use(i.ttf2eot()).use(i.ttf2woff()).use(i.ttf2woff2()).runAsync();try{const i=function(e,n=[]){return e.replace(/\.mdi-([a-z0-9-]+):{1,2}before{content:"\\[A-Fa-f0-9]+?"}/g,((e,t)=>n.includes(t)?e:"")).replace(/\.\.\/fonts\//g,"./").replace(/\/\*# sourceMappingURL=.*? \*\//,"").replace(/\n+/g,"")+"\n"}(a,e.names);t.writeFileSync(o.join(l,`${n}.min.css`),i),e.silent||console.log(`✅${s} Subset mdi fonts generated at `+f)}catch(e){console.error(`❌${s} Subset mdi .css generation failed:`,e)}}catch(e){console.error(`❌${s} Subset mdi fonts generation failed:`,e)}}}};
//# sourceMappingURL=index.min.js.map
